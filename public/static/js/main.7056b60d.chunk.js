(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n.n(c),o=n(6),i=n.n(o),s=(n(15),n(9)),l=n(2),u=n.p+"static/media/white-logo.c2821b38.svg";var p=function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("img",{src:u,className:"header__logo",alt:"\u041b\u043e\u0433\u043e\u0442\u0438\u043f"})})},d=r.a.createContext();var _=function(e){var t=r.a.useContext(d),n=e.card.owner._id===t._id,c=e.card.likes.some((function(e){return e._id===t._id})),o="location__trash ".concat(n?"location__trash_visible":"location__trash_invisible"),i="location__rate ".concat(c?"location__rate_marked":"");return Object(a.jsxs)("div",{className:"location",children:[Object(a.jsx)("img",{onClick:function(){e.onImgClick(e.card)},src:String(e.card.link),alt:"\u0424\u043e\u0442\u043e ".concat(e.card.name),className:"location__image"}),Object(a.jsx)("button",{type:"button",onClick:function(){e.onCardDelete(e.card)},className:o}),Object(a.jsxs)("div",{className:"location__info",children:[Object(a.jsx)("h2",{className:"location__name",children:e.card.name}),Object(a.jsxs)("div",{className:"location__wrap",children:[Object(a.jsx)("button",{type:"button",onClick:function(){e.onCardLike(e.card)},className:i}),Object(a.jsx)("span",{className:"location__likes",children:e.card.likes.length})]})]})]})};var h=function(e){var t=r.a.useContext(d);return Object(a.jsxs)("main",{className:"content",children:[Object(a.jsxs)("section",{className:"profile",id:"profile",children:[Object(a.jsxs)("div",{className:"profile__overlay",children:[Object(a.jsx)("img",{src:t.avatar,alt:"\u0410\u0432\u0430\u0442\u0430\u0440 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",className:"profile__avatar"}),Object(a.jsx)("button",{className:"profile__edit-avatar",onClick:e.onEditAvatar,children:"\ud83d\udd89"})]}),Object(a.jsxs)("div",{className:"profile__info",children:[Object(a.jsxs)("div",{className:"profile__text",children:[Object(a.jsx)("h1",{className:"profile__name",children:t.name}),Object(a.jsx)("p",{className:"profile__role",children:t.about})]}),Object(a.jsx)("button",{className:"profile__edit-info",onClick:e.onEditProfile,children:"\ud83d\udd89"})]}),Object(a.jsx)("button",{className:"profile__add",onClick:e.onAddPlace,children:"\uff0b"})]}),Object(a.jsx)("section",{className:"locations",children:e.cards.map((function(t){return Object(a.jsx)(_,{card:t,onImgClick:e.onImgClick,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete},t._id)}))})]})};var j=function(){var e=new Date;return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsxs)("p",{className:"footer__copyright",children:["\xa92020 - ",e.getFullYear()," Mesto Russia"]})})};var m=function(e){return Object(a.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen&&"popup_opened"),children:Object(a.jsxs)("form",{name:e.name,noValidate:!0,className:"popup__container popup__form popup__container_type_".concat(e.name),onSubmit:e.onSubmit,children:[Object(a.jsx)("button",{onClick:e.onClose,type:"button",className:"popup__close popup__close_profile-".concat(e.name),children:"\u2573"}),Object(a.jsx)("h2",{className:"popup__title",children:e.title}),e.children,Object(a.jsx)("button",{type:"submit",className:"popup__btn popup__btn_type_".concat(e.name),children:e.btnText})]})})};var f=function(e){return Object(a.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen&&e.card&&"popup_opened"),children:Object(a.jsxs)("div",{className:"popup__container popup__container_image",children:[Object(a.jsx)("button",{onClick:e.onClose,type:"button",className:"popup__close popup__close_image",children:"\u2573"}),Object(a.jsx)("img",{src:String(e.card.link),alt:"\u0424\u043e\u0442\u043e ".concat(e.card.name),className:"popup__image"}),Object(a.jsx)("p",{className:"popup__caption",children:e.card.name})]})})},b=n(7),x=n(8),O=new(function(){function e(t){Object(b.a)(this,e),this._url=t.url,this._headers=t.headers}return Object(x.a)(e,[{key:"_responseHandler",value:function(e){return e.ok?e.json():Promise.reject("Error happen: ".concat(e.status))}},{key:"getInitialData",value:function(){return Promise.all([this.getInitialProfile(),this.getInitialCards()])}},{key:"getInitialCards",value:function(){return fetch("".concat(this._url,"cards"),{method:"GET",headers:this._headers}).then(this._responseHandler)}},{key:"getInitialProfile",value:function(){return fetch("".concat(this._url,"users/me"),{method:"GET",headers:this._headers}).then(this._responseHandler)}},{key:"addCard",value:function(e){return fetch("".concat(this._url,"cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._responseHandler)}},{key:"delCard",value:function(e){return fetch("".concat(this._url,"cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._responseHandler)}},{key:"addLike",value:function(e){return fetch("".concat(this._url,"cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._responseHandler)}},{key:"delLike",value:function(e){return fetch("".concat(this._url,"cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._responseHandler)}},{key:"changeLikeCardStatus",value:function(e,t){return t?this.addLike(e):this.delLike(e)}},{key:"setProfile",value:function(e){return fetch("".concat(this._url,"users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})}).then(this._responseHandler)}},{key:"setProfileAvatar",value:function(e){return fetch("".concat(this._url,"users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})}).then(this._responseHandler)}}]),e}())({url:"https://mesto.nomoreparties.co/v1/cohort-16/",headers:{authorization:"cbe4503b-5ebe-4451-a159-203687412eb7","Content-Type":"application/json"}});var v=function(e){var t=r.a.useContext(d),n=r.a.useState(""),c=Object(l.a)(n,2),o=c[0],i=c[1],s=r.a.useState(""),u=Object(l.a)(s,2),p=u[0],_=u[1];return r.a.useEffect((function(){i(t.name),_(t.about)}),[t]),Object(a.jsx)(m,{name:"edit",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",btnText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:o,about:p})},children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"text",id:"name-input",value:o||"",name:"name",placeholder:"\u0418\u043c\u044f",onChange:function(e){i(e.target.value)},className:"popup__text popup__text_type_name",required:!0,minLength:"2",maxLength:"40"}),Object(a.jsx)("span",{id:"name-input-error",className:"popup__text-error",children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0430"}),Object(a.jsx)("input",{type:"text",id:"role-input",name:"about",onChange:function(e){_(e.target.value)},placeholder:"\u0414\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u044c",className:"popup__text popup__text_type_role",value:p||"",required:!0,minLength:"2",maxLength:"200"}),Object(a.jsx)("span",{id:"role-input-error",className:"popup__text-error",children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0430"})]})})};var g=function(e){var t=r.a.useRef("");return Object(a.jsx)(m,{name:"renew",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",btnText:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(n){n.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})},children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"url",id:"avatar-ref-input",name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043d\u043e\u0432\u044b\u0439 \u0430\u0432\u0430\u0442\u0430\u0440",required:!0,className:"popup__text popup__text_type_ref",ref:t}),Object(a.jsx)("span",{id:"avatar-ref-input-error",className:"popup__text-error",children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0430"})]})})};var C=function(e){var t=r.a.useState(""),n=Object(l.a)(t,2),c=n[0],o=n[1],i=r.a.useState(""),s=Object(l.a)(i,2),u=s[0],p=s[1];return Object(a.jsx)(m,{name:"add",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",btnText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",isOpen:e.isOpen,onClose:e.onClose,onSubmit:function(t){t.preventDefault(t),e.onAddPlace({name:c,link:u})},children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"text",id:"location-name-input",name:"locationName",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,minLength:"1",maxLength:"30",className:"popup__text popup__text_type_location-name",value:c,onChange:function(e){o(e.target.value)}}),Object(a.jsx)("span",{id:"location-name-input-error",className:"popup__text-error",children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0430"}),Object(a.jsx)("input",{type:"url",id:"location-ref-input",name:"locationRef",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,className:"popup__text popup__text_type_ref",value:u,onChange:function(e){p(e.target.value)}}),Object(a.jsx)("span",{id:"location-ref-input-error",className:"popup__text-error",children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0430"})]})})};var N=function(){var e=r.a.useState(!1),t=Object(l.a)(e,2),n=t[0],c=t[1],o=r.a.useState(!1),i=Object(l.a)(o,2),u=i[0],_=i[1],b=r.a.useState(!1),x=Object(l.a)(b,2),N=x[0],k=x[1],y=r.a.useState(!1),S=Object(l.a)(y,2),P=S[0],L=S[1],E=r.a.useState({}),T=Object(l.a)(E,2),D=T[0],A=T[1],I=r.a.useState({}),H=Object(l.a)(I,2),F=H[0],w=H[1],U=r.a.useState([]),q=Object(l.a)(U,2),J=q[0],R=q[1];function B(){c(!1),_(!1),k(!1),L(!1),A({})}return r.a.useEffect((function(){O.getInitialData().then((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];w(n),R(a)})).catch((function(e){alert(e)}))}),[]),Object(a.jsxs)(d.Provider,{value:F,children:[Object(a.jsx)(p,{}),Object(a.jsx)(h,{onEditProfile:function(){c(!n)},onAddPlace:function(){_(!u)},onEditAvatar:function(){k(!N)},onImgClick:function(e){L(!P),A(e)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===F._id}));O.changeLikeCardStatus(e._id,!t).then((function(t){var n=J.map((function(n){return n._id===e._id?t:n}));R(n)}),(function(e){alert(e)}))},onCardDelete:function(e){O.delCard(e._id).then((function(){var t=J.filter((function(t){return t!==e}));R(t)}),(function(e){alert(e)}))},cards:J}),Object(a.jsx)(j,{}),Object(a.jsx)(v,{isOpen:n,onClose:B,onUpdateUser:function(e){O.setProfile(e).then((function(e){w(e),B()}),(function(e){alert(e)}))}}),Object(a.jsx)(g,{isOpen:N,onClose:B,onUpdateAvatar:function(e){O.setProfileAvatar(e).then((function(e){w(e),B()}),(function(e){alert(e)}))}}),Object(a.jsx)(C,{isOpen:u,onClose:B,onAddPlace:function(e){O.addCard(e).then((function(e){R([e].concat(Object(s.a)(J))),B()}),(function(e){alert(e)}))}}),Object(a.jsx)(m,{name:"delete",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u043d\u044b?",btnText:"\u0414\u0430",onClose:B,children:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("input",{type:"url",id:"avatar-ref-input",name:"avatar",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043d\u043e\u0432\u044b\u0439 \u0430\u0432\u0430\u0442\u0430\u0440",required:!0,className:"popup__text popup__text_type_ref"}),Object(a.jsx)("span",{id:"avatar-ref-input-error",className:"popup__text-error",children:"\u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u043e\u0441\u0442\u044c \u0432\u0432\u043e\u0434\u0430"})]})}),Object(a.jsx)(f,{name:"edit",card:D,isOpen:P,onClose:B})]})},k=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,o=t.getTTFB;n(e),a(e),c(e),r(e),o(e)}))};i.a.render(Object(a.jsx)(r.a.StrictMode,{children:Object(a.jsx)(N,{})}),document.getElementById("root")),k()}},[[16,1,2]]]);
//# sourceMappingURL=main.7056b60d.chunk.js.map