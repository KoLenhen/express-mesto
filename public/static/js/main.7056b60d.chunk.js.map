{"version":3,"sources":["images/white-logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/ImagePopup.js","utils/api.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","src","headerLogo","alt","CurrentUserContext","React","createContext","Card","props","currentUser","useContext","isOwn","card","owner","_id","isLiked","likes","some","i","cardDeleteButtonClassName","cardLikeButtonClassName","onClick","onImgClick","String","link","name","type","onCardDelete","onCardLike","length","Main","id","avatar","onEditAvatar","about","onEditProfile","onAddPlace","cards","map","Footer","today","Date","getFullYear","PopupWithForm","isOpen","noValidate","onSubmit","onClose","title","children","btnText","ImagePopup","api","options","this","_url","url","_headers","headers","res","ok","json","Promise","reject","status","all","getInitialProfile","getInitialCards","fetch","method","then","_responseHandler","data","body","JSON","stringify","addLike","delLike","profile","obj","authorization","EditProfilePopup","useState","setName","description","setDescription","useEffect","e","preventDefault","onUpdateUser","value","placeholder","onChange","target","required","minLength","maxLength","EditAvatarPopup","avatarRef","useRef","onUpdateAvatar","current","ref","AddPlacePopup","setLink","App","isEditProfilePopupOpen","setEditProfilePopupState","isAddPlacePopupOpen","setAddPlacePopupState","isEditAvatarPopupOpen","setEditAvatarPopupState","isCardPopupOpen","setCardSPopupState","selectedCard","setSelectedCard","setCurrentUser","setCards","closeAllPopups","getInitialData","profileData","cardsData","catch","error","alert","Provider","changeLikeCardStatus","newCard","newCards","c","delCard","filter","setProfile","err","setProfileAvatar","addCard","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.7056b60d.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/white-logo.c2821b38.svg\";","import React from 'react';\r\nimport headerLogo from '../images/white-logo.svg';\r\n\r\nfunction Header() {\r\n  return (\r\n    <header className=\"header\">\r\n      <img src={headerLogo} className=\"header__logo\" alt=\"Логотип\" />\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header;","import React from 'react';\r\n\r\nexport const CurrentUserContext = React.createContext();\r\n\r\n","import React from 'react';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Card(props) {\r\n\r\n    const currentUser = React.useContext(CurrentUserContext);\r\n    const isOwn = props.card.owner._id === currentUser._id;\r\n    const isLiked = props.card.likes.some(i => i._id === currentUser._id);\r\n\r\n    const cardDeleteButtonClassName = (\r\n        `location__trash ${isOwn ? 'location__trash_visible' : 'location__trash_invisible'}`\r\n    );\r\n\r\n    const cardLikeButtonClassName = (\r\n        `location__rate ${isLiked ? 'location__rate_marked' : ''}`\r\n    );\r\n\r\n    function handleImgClick() {\r\n        props.onImgClick(props.card);\r\n    }\r\n\r\n    function handleLikeClick () {\r\n        props.onCardLike(props.card);\r\n    }\r\n\r\n    \r\n    function handleDeleteClick () {\r\n        props.onCardDelete(props.card);\r\n    }\r\n\r\n    return (\r\n        <div className=\"location\">\r\n            <img onClick={handleImgClick} src={String(props.card.link)} alt={`Фото ${props.card.name}`} className=\"location__image\" />\r\n            {/* \"location__trash\" */}\r\n            <button type=\"button\" onClick={handleDeleteClick} className={cardDeleteButtonClassName}></button>\r\n            <div className=\"location__info\">\r\n                <h2 className=\"location__name\">\r\n                    {props.card.name}\r\n                </h2>\r\n                <div className=\"location__wrap\">\r\n                    <button type=\"button\" onClick={handleLikeClick} className={cardLikeButtonClassName}></button>\r\n                    <span className=\"location__likes\">{props.card.likes.length}</span>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Card;","import React from 'react';\r\nimport Card from './Card';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction Main(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n\r\n  return (\r\n    <main className=\"content\">\r\n      <section className=\"profile\" id=\"profile\">\r\n        <div className=\"profile__overlay\">\r\n          <img src={currentUser.avatar} alt=\"Аватар пользователя\" className=\"profile__avatar\" />\r\n          <button className=\"profile__edit-avatar\" onClick={props.onEditAvatar}>\r\n            &#128393;\r\n              </button>\r\n        </div>\r\n        <div className=\"profile__info\">\r\n          <div className=\"profile__text\">\r\n            <h1 className=\"profile__name\">{currentUser.name}</h1>\r\n            <p className=\"profile__role\">{currentUser.about}</p>\r\n          </div>\r\n          <button className=\"profile__edit-info\" onClick={props.onEditProfile}>\r\n            &#128393;\r\n              </button>\r\n        </div>\r\n        <button className=\"profile__add\" onClick={props.onAddPlace}>\r\n          &#65291;\r\n            </button>\r\n      </section>\r\n      <section className=\"locations\">\r\n        {props.cards.map(card =>\r\n          <Card\r\n            key={card._id}\r\n            card={card}\r\n            onImgClick={props.onImgClick}\r\n            onCardLike={props.onCardLike}\r\n            onCardDelete={props.onCardDelete}\r\n          />\r\n        )}\r\n      </section>\r\n    </main>\r\n  );\r\n}\r\n\r\nexport default Main;","import React from 'react';\r\n\r\nfunction Footer() {\r\n    const today = new Date();\r\n    return (\r\n        <footer className=\"footer\">\r\n            <p className=\"footer__copyright\">&copy;2020 - {today.getFullYear()} Mesto Russia</p>\r\n        </footer>\r\n    )\r\n}\r\n\r\nexport default Footer;","import React from 'react';\r\n\r\nfunction PopupWithForm(props) {\r\n\r\n    return (\r\n        <div className={`popup popup_type_${props.name} ${props.isOpen && 'popup_opened'}`}>\r\n            <form \r\n                name={props.name} noValidate\r\n                className={`popup__container popup__form popup__container_type_${props.name}`}\r\n                onSubmit={props.onSubmit} >\r\n                <button onClick={props.onClose} type=\"button\" className={`popup__close popup__close_profile-${props.name}`}>&#9587;</button>\r\n                <h2 className=\"popup__title\">\r\n                    {props.title}\r\n                </h2>\r\n                {props.children}\r\n                <button type=\"submit\" className={`popup__btn popup__btn_type_${props.name}`} >{props.btnText}</button>\r\n            </form>\r\n        </div>\r\n    )\r\n\r\n}\r\n// popup__btn_disabled \r\nexport default PopupWithForm;","import React from 'react';\r\n\r\nfunction ImagePopup(props) {\r\n\r\n    return (\r\n        <div className={`popup popup_type_${props.name} ${props.isOpen && props.card && 'popup_opened'}`}>\r\n            <div className=\"popup__container popup__container_image\">\r\n                <button onClick={props.onClose} type=\"button\" className=\"popup__close popup__close_image\">&#9587;</button>\r\n                <img src={String(props.card.link)} alt={`Фото ${props.card.name}`} className=\"popup__image\" />\r\n                <p className=\"popup__caption\">{props.card.name}</p>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default ImagePopup;","class Api {\r\n    constructor(options) {\r\n      this._url = options.url;\r\n      this._headers = options.headers;\r\n    }\r\n  \r\n    _responseHandler(res) {\r\n      if (res.ok) {\r\n        return res.json();\r\n      }\r\n      return Promise.reject(`Error happen: ${res.status}`);\r\n    }\r\n  \r\n    getInitialData() {\r\n      return Promise.all([this.getInitialProfile(), this.getInitialCards()]);\r\n    }\r\n  \r\n    getInitialCards() {\r\n      return fetch(`${this._url}cards`, {\r\n        method: 'GET',\r\n        headers: this._headers,\r\n      })\r\n        .then(this._responseHandler);\r\n    }\r\n  \r\n    getInitialProfile() {\r\n      return fetch(`${this._url}users/me`, {\r\n        method: 'GET',\r\n        headers: this._headers,\r\n      })\r\n      .then(this._responseHandler);\r\n    }\r\n  \r\n    addCard(data) {\r\n      return fetch(`${this._url}cards`, {\r\n        method: 'POST',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name: data.name,\r\n          link: data.link\r\n        }),\r\n      })\r\n      .then(this._responseHandler);\r\n    }\r\n  \r\n    delCard(id) {\r\n      return fetch(`${this._url}cards/${id}`, {\r\n        method: 'DELETE',\r\n        headers: this._headers,\r\n      })\r\n      .then((this._responseHandler));\r\n    }\r\n  \r\n    addLike(id) {\r\n      return fetch(`${this._url}cards/likes/${id}`, {\r\n        method: 'PUT',\r\n        headers: this._headers,\r\n      })\r\n      .then(this._responseHandler);\r\n    }\r\n  \r\n    delLike(id) {\r\n      return fetch(`${this._url}cards/likes/${id}`, {\r\n        method: 'DELETE',\r\n        headers: this._headers,\r\n      })\r\n      .then(this._responseHandler);\r\n    }\r\n  \r\n    changeLikeCardStatus(id, isLiked) {\r\n      if (!isLiked) {\r\n        return this.delLike(id);\r\n      } else {\r\n        return this.addLike(id);\r\n      }\r\n    }\r\n\r\n    setProfile(profile) {\r\n      return fetch(`${this._url}users/me`, {\r\n        method: 'PATCH',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          name: profile.name,\r\n          about: profile.about,\r\n        }),\r\n      }).then(this._responseHandler);\r\n    }\r\n  \r\n    setProfileAvatar(obj) {\r\n      return fetch(`${this._url}users/me/avatar`, {\r\n        method: 'PATCH',\r\n        headers: this._headers,\r\n        body: JSON.stringify({\r\n          avatar: obj.avatar,\r\n        }),\r\n      })\r\n      .then(this._responseHandler);\r\n    }\r\n  \r\n  }\r\n  \r\n  const api = new Api({\r\n    url: 'https://mesto.nomoreparties.co/v1/cohort-16/',\r\n    headers: {\r\n      authorization: 'cbe4503b-5ebe-4451-a159-203687412eb7',\r\n      'Content-Type': 'application/json',\r\n    }\r\n  });\r\n\r\n  export default api;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\r\n\r\nfunction EditProfilePopup(props) {\r\n\r\n  const currentUser = React.useContext(CurrentUserContext);\r\n  const [name, setName] = React.useState('');\r\n  const [description, setDescription] = React.useState('');\r\n\r\n  function handleChangeName(e) {\r\n    setName(e.target.value);\r\n  }\r\n\r\n  function handleChangeDescription(e) {\r\n    setDescription(e.target.value);\r\n  }\r\n\r\n  function handleSubmit(e) {\r\n    e.preventDefault();\r\n    props.onUpdateUser({\r\n      name,\r\n      about: description,\r\n    });\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    setName(currentUser.name);\r\n    setDescription(currentUser.about);\r\n  }, [currentUser]);\r\n\r\n  return (\r\n    <PopupWithForm\r\n      name=\"edit\"\r\n      title=\"Редактировать профиль\"\r\n      btnText=\"Сохранить\"\r\n      isOpen={props.isOpen}\r\n      onClose={props.onClose}\r\n      onSubmit={handleSubmit}\r\n    >\r\n      <>\r\n        <input type=\"text\" id=\"name-input\" value={name || \"\"} name=\"name\" placeholder=\"Имя\" onChange={handleChangeName} className=\"popup__text popup__text_type_name\"\r\n          required minLength=\"2\" maxLength=\"40\" />\r\n        <span id=\"name-input-error\" className=\"popup__text-error\">Проверьте правильность ввода</span>\r\n        <input type=\"text\" id=\"role-input\" name=\"about\" onChange={handleChangeDescription} placeholder=\"Деятельность\"\r\n          className=\"popup__text popup__text_type_role\" value={description || \"\"} required minLength=\"2\" maxLength=\"200\" />\r\n        <span id=\"role-input-error\" className=\"popup__text-error\">Проверьте правильность ввода</span>\r\n      </>\r\n    </PopupWithForm>\r\n  )\r\n}\r\n\r\nexport default EditProfilePopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\n\r\nfunction EditAvatarPopup(props) {\r\n\r\n    const avatarRef = React.useRef('');\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault();\r\n        props.onUpdateAvatar({\r\n            avatar: avatarRef.current.value,\r\n        });\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n            name=\"renew\"\r\n            title=\"Обновить аватар\"\r\n            btnText=\"Сохранить\"\r\n            isOpen={props.isOpen}\r\n            onClose={props.onClose}\r\n            onSubmit={handleSubmit}\r\n        >\r\n            <>\r\n                <input type=\"url\" id=\"avatar-ref-input\" name=\"avatar\" placeholder=\"Ссылка на новый аватар\" required\r\n                    className=\"popup__text popup__text_type_ref\" ref={avatarRef} />\r\n                <span id=\"avatar-ref-input-error\" className=\"popup__text-error\">Проверьте правильность ввода</span>\r\n            </>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default EditAvatarPopup;","import React from 'react';\r\nimport PopupWithForm from './PopupWithForm';\r\n\r\nfunction AddPlacePopup(props) {\r\n\r\n    const [name, setName] = React.useState('');\r\n    const [link, setLink] = React.useState('');\r\n\r\n    function handleChangeName(e) {\r\n        setName(e.target.value);\r\n    }\r\n\r\n    function handleChangeLink(e) {\r\n        setLink(e.target.value);\r\n    }\r\n\r\n    function handleSubmit(e) {\r\n        e.preventDefault(e);\r\n        props.onAddPlace({\r\n            name: name,\r\n            link: link,\r\n        })\r\n    }\r\n\r\n    return (\r\n        <PopupWithForm\r\n            name=\"add\"\r\n            title=\"Новое место\"\r\n            btnText=\"Создать\"\r\n            isOpen={props.isOpen}\r\n            onClose={props.onClose}\r\n            onSubmit={handleSubmit}\r\n        >\r\n            <>\r\n                <input type=\"text\" id=\"location-name-input\" name=\"locationName\" placeholder=\"Название\" required minLength=\"1\"\r\n                    maxLength=\"30\" className=\"popup__text popup__text_type_location-name\" value={name} onChange={handleChangeName} />\r\n                <span id=\"location-name-input-error\" className=\"popup__text-error\">Проверьте правильность ввода</span>\r\n                <input type=\"url\" id=\"location-ref-input\" name=\"locationRef\" placeholder=\"Ссылка на картинку\" required\r\n                    className=\"popup__text popup__text_type_ref\" value={link} onChange={handleChangeLink} />\r\n                <span id=\"location-ref-input-error\" className=\"popup__text-error\">Проверьте правильность ввода</span>\r\n            </>\r\n        </PopupWithForm>\r\n    )\r\n}\r\n\r\nexport default AddPlacePopup;","import React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport PopupWithForm from './PopupWithForm';\nimport ImagePopup from './ImagePopup';\nimport api from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\n\n\n\nfunction App() {\n  const [isEditProfilePopupOpen, setEditProfilePopupState] = React.useState(false);\n  const [isAddPlacePopupOpen, setAddPlacePopupState] = React.useState(false);\n  const [isEditAvatarPopupOpen, setEditAvatarPopupState] = React.useState(false);\n  const [isCardPopupOpen, setCardSPopupState] = React.useState(false);\n\n  const [selectedCard, setSelectedCard] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n    api.getInitialData()\n      .then((data) => {\n        const [profileData, cardsData] = data;\n        setCurrentUser(profileData);\n        setCards(cardsData);\n      })\n      .catch((error) => { alert(error) });\n  }, []);\n\n  function handleEditAvatarClick() {\n    setEditAvatarPopupState(!isEditAvatarPopupOpen);\n  }\n\n  function handleEditProfileClick() {\n    setEditProfilePopupState(!isEditProfilePopupOpen);\n  }\n  function handleAddPlaceClick() {\n    setAddPlacePopupState(!isAddPlacePopupOpen);\n  }\n\n  function handleCardClick(card) {\n    setCardSPopupState(!isCardPopupOpen);\n    setSelectedCard(card);\n  }\n\n  function closeAllPopups() {\n    setEditProfilePopupState(false);\n    setAddPlacePopupState(false);\n    setEditAvatarPopupState(false);\n    setCardSPopupState(false);\n    setSelectedCard({});\n  }\n\n  function handleUpdateUser(data) {\n    api.setProfile(data)\n      .then(\n        (data) => {\n          setCurrentUser(data);\n          closeAllPopups();\n        },\n        (err) => {\n          alert(err);\n        }\n      )\n  }\n\n  function handleUpdateAvatar(data){\n    api.setProfileAvatar(data)\n    .then(\n      (data) => {\n        setCurrentUser(data);\n        closeAllPopups();\n      },\n      (err) => {\n        alert(err);\n      }\n    )\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    api.changeLikeCardStatus(card._id, !isLiked)\n    .then((newCard) => {\n      const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n      setCards(newCards);\n    },\n      (error) => {\n        alert(error);\n      }\n    )\n  }\n\n  \n  function handleCardDelete (card) {\n    api.delCard(card._id)\n    .then(() => {\n        const newCards = cards.filter((c) => c !== card );\n        setCards(newCards);\n      },\n      (error) => {\n        alert(error);\n      }\n    )\n  }\n\n  function handleAddPlaceSubmit (data) {\n    api.addCard(data)\n    .then((newCard) => {\n       setCards([newCard, ...cards]);\n       closeAllPopups();\n      },\n      (error) => {\n        alert(error);\n      }\n    )\n  }\n\n\n  return (\n    <CurrentUserContext.Provider value={currentUser} >\n        <Header />\n        <Main\n          onEditProfile={handleEditProfileClick}\n          onAddPlace={handleAddPlaceClick}\n          onEditAvatar={handleEditAvatarClick}\n          onImgClick={handleCardClick}\n          onCardLike = {handleCardLike}\n          onCardDelete = {handleCardDelete}\n          cards = {cards}\n        />\n        <Footer />\n        <EditProfilePopup\n          isOpen={isEditProfilePopupOpen}\n          onClose={closeAllPopups}\n          onUpdateUser={handleUpdateUser}\n        />\n        <EditAvatarPopup\n          isOpen={isEditAvatarPopupOpen}\n          onClose={closeAllPopups}\n          onUpdateAvatar = {handleUpdateAvatar}\n        />\n      <AddPlacePopup\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlaceSubmit}\n      />\n        <PopupWithForm\n          name=\"delete\"\n          title=\"Вы уверенны?\"\n          btnText=\"Да\"\n          onClose={closeAllPopups}\n        >\n          <>\n            <input type=\"url\" id=\"avatar-ref-input\" name=\"avatar\" placeholder=\"Ссылка на новый аватар\" required\n              className=\"popup__text popup__text_type_ref\" />\n            <span id=\"avatar-ref-input-error\" className=\"popup__text-error\">Проверьте правильность ввода</span>\n          </>\n        </PopupWithForm>\n        <ImagePopup\n          name=\"edit\"\n          card={selectedCard}\n          isOpen={isCardPopupOpen}\n          onClose={closeAllPopups}>\n        </ImagePopup>\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}